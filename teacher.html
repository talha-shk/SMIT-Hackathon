<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Mukta:wght@200&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Domine&display=swap"
      rel="stylesheet"
    />
    <script
      src="https://kit.fontawesome.com/cc4a981039.js"
      crossorigin="anonymous"
    ></script>
    <link rel="stylesheet" href="css/style-link.css" />
    <title>Teachers Portal</title>
    <style>
      .container-t {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
      }
      .container-t > h1 {
        font-size: 2rem;
        color: #1f2837;
        text-align: center;
      }
      .container-t > h1 > span {
        color: #cea434;
      }
      #name {
        padding: 1rem;
        margin: 1rem;
        width: 100%;
        display: flex;
        justify-content: space-between;
      }
      #name > h3 {
        color: rgb(117, 117, 117);
      }
      #span {
        color: rgb(3, 150, 3);
      }
      .course {
        background-color: rgb(236, 236, 236);
        width: 60%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        padding: 1rem;
      }
      .course > h1 {
        color: #1f2837;
      }
      .course > form {
        width: 50%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
      }
      .course > form > select {
        width: 50%;
        padding: 0.2 rem 0.5rem;
        font-size: 1rem;
        margin: 1rem 0;
        border: none;
        border-bottom: 1px solid black;
      }
      .btn {
        border: 2px solid transparent;
        background-color: #1f2837;
        color: #cea434;
        font-size: 1rem;
        font-weight: bold;
        padding: 0.2rem 0.6rem;
        cursor: pointer;
        transition: all 0.3s;
      }
      .btn:hover {
        color: #1f2837;
        background-color: #cea434;
      }
    </style>
  </head>
  <body onload="adb()">
    <header>
      <div class="logo">
        <i class="fas fa-book-reader"></i>
        <h2 class="logo_name">Universty of Hyderabad</h2>
        <h4>Change your life, start here.</h4>
      </div>
      <div class="nav_items">
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="about university.html">About University</a></li>
          <li><a href="programs.html">Departments</a></li>
          <li><a href="admission.html">Admissions</a></li>
          <li><a href="staff.html">Staff</a></li>
          <li><a href="contact.html">Contact Us</a></li>
        </ul>
      </div>
    </header>
    <section class="container-t">
      <h1>Welcome to <span>Teachers Portal</span></h1>
      <div id="name"></div>
      <div id="div" class="course">
        <h1>You can select Courses from here</h1>
        <form action="#">
          <!-- <input type="text" id="c-name" placeholder="Enter Course Name">
            <input type="text" id="c-title" placeholder="Enter Course Title">
            <input type="text" id="c-hour" placeholder="Enter Credit Hour"> -->
          <label for="select">Course Name</label>
          <select class="input" id="select" onchange="data()">
            <option value="">Select Course</option>
          </select>
          <label id="lab-sec2" for="select2" style="display: none"
            >Course Title</label
          >
          <select class="input" id="select2" style="display: none"></select>
          <label id="lab-sec3" for="select3" style="display: none"
            >Credit Hours</label
          >
          <select class="input" id="select3" style="display: none"></select>
        </form>
        <button class="btn" onclick="add_course()">Add Course</button>
      </div>
    </section>

    <footer>
      <div class="footer_div">
        <h5 class="footer_heading">About University</h5>
        <a href="#">Brief Introduction</a>
        <a href="#">The legal authority</a>
        <a href="#">Message from VC</a>
        <a href="#">Board of governers</a>
        <a href="#">Contact Us</a>
      </div>
      <div class="footer_div">
        <h5 class="footer_heading">Admissions</h5>
        <a href="#">Study at Isra</a>
        <a href="#">Undergraduate</a>
        <a href="#">Postgraduate</a>
        <a href="#">University Campus</a>
        <a href="#">Interview proforma</a>
        <a href="#">Fee structure</a>
      </div>
      <div class="footer_div">
        <h5 class="footer_heading">Our Campuses</h5>
        <a href="#">Hyderbad Campus</a>
        <a href="#">Karachi Campus</a>
        <a href="#">Islamabad Campus</a>
      </div>
      <div class="footer_div">
        <h5 class="footer_heading">Quick Links</h5>
        <a href="#">News letter</a>
        <a href="#">Scholarships</a>
        <a href="#">Alumni</a>
        <a href="#">Microsoft DreamSpark</a>
      </div>
      <div class="footer_div">
        <h5 class="footer_heading">Campus Life</h5>
        <a href="#">Life on campus</a>
        <a href="#">Academic Calendar</a>
        <a href="#">Course Registration</a>
        <a href="#">UOH Webmail</a>
        <a href="#">LMS</a>
      </div>
    </footer>
    <div class="myname">
      <h3>
        Designed and Developed By Muhammad Talha (WM-1097) (All rights are
        reserved)
      </h3>
    </div>

    <!-- link firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-database-compat.js"></script>
    <script>
      const firebaseConfig = {
        apiKey: "AIzaSyB_2t-PS4MP-VgYOv8X0lg02c1jb4QZHqg",
        authDomain: "smit-admin-panel.firebaseapp.com",
        databaseURL: "https://smit-admin-panel-default-rtdb.firebaseio.com",
        projectId: "smit-admin-panel",
        storageBucket: "smit-admin-panel.appspot.com",
        messagingSenderId: "217214280444",
        appId: "1:217214280444:web:2459ca0805f33c333bad79",
      };
      firebase.initializeApp(firebaseConfig);
      console.log(firebase);
    </script>
    <script src="signup.js"></script>

    <script>
      function adb() {
        firebase
          .database()
          .ref(`/course`)
          .once("value", (snapshot) => {
            const data11 = snapshot.toJSON();
            const value = Object.values(data11);

            console.log(value);
            var e = document.getElementById("select");

            value.map((v, i) => {
              if (v.teacher) {
                console.log("Already Teacher");
              } else {
                var op = document.createElement("option");
                var val = op.setAttribute("value", v.course_name);
                var txt = document.createTextNode(v.course_name);
                op.appendChild(txt);
                e.appendChild(op);
              }
            });
          });
      }

      function data() {
        var e = document.getElementById("select");
        console.log(e.value);
        document.getElementById("select2").style.display = "inline";
        document.getElementById("select3").style.display = "inline";
        document.getElementById("lab-sec2").style.display = "inline";
        document.getElementById("lab-sec3").style.display = "inline";

        firebase
          .database()
          .ref()
          .child("/course")
          .orderByChild("course_name")
          .equalTo(e.value)
          .once("value")
          .then((snap) => {
            var data = snap.toJSON();
            var value = Object.values(data);
            // console.log(value);
            // console.log("Ye "+value[0].course_name);
            // console.log("Ye "+value[0].c_hour);
            // console.log("Ye "+value[0].title);
            var course = {
              name: value[0].course_name,
              title: value[0].title,
              hour: value[0].c_hour,
            };
            console.log(course);
            let a = localStorage.getItem("Current_user Uid");
            firebase
              .database()
              .ref(`/teacher/` + a)
              .child("Courses")
              .push(course);
            var e = document.getElementById("select2");
            e.innerHTML = "";
            var e2 = document.getElementById("select3");
            e2.innerHTML = "";

            value.map((v, i) => {
              var op = document.createElement("option");
              var val = op.setAttribute("value", v.title);
              var txt = document.createTextNode(v.title);
              op.appendChild(txt);
              e.appendChild(op);

              var op = document.createElement("option");
              var val = op.setAttribute("value", v.c_hour);
              var txt = document.createTextNode(v.c_hour);
              op.appendChild(txt);
              e2.appendChild(op);
            });
          });
      }

      const add_course = () => {
        a = localStorage.getItem("Current_user Uid");
        // console.log(a)
        var e = document.getElementById("select");
        console.log(e.value);
        if (e.value == "") {
          alert("Select ");
        } else {
          firebase
            .database()
            .ref()
            .child("/course")
            .orderByChild("course_name")
            .equalTo(e.value)
            .once("value")
            .then((snap) => {
              var data = snap.toJSON();
              var value = Object.values(data);
              console.log("ye" + value);
              document.getElementById("select").value = "";
              document.getElementById("select2").value = "";
              document.getElementById("select3").value = "";
            });
        }
        var ob = firebase
          .database()
          .ref()
          .child("/course")
          .child(a)
          .once("value");
        var ob1 = Object.value(ob);
        console.log("user " + ob1);
      };

      // get logged in user
      let a = localStorage.getItem("Current_user Uid");
      console.log(a);
      firebase
        .database()
        .ref("/teacher/" + a)
        .once("value")
        .then(function (snapshot) {
          let userData = snapshot.val();
          console.log(userData.Name);
          let div = document.getElementById("name");
          let name = document.createElement("h3");
          let name_txt = document.createTextNode("User: " + userData.Name);
          let status = document.createElement("h3");
          let status_txt = document.createTextNode("Status: ");
          let span = document.createElement("span");
          span.setAttribute("id", "span");
          let active = document.createTextNode("Active");
          span.appendChild(active);
          name.appendChild(name_txt);
          status.appendChild(status_txt);
          status.appendChild(span);
          div.appendChild(name);
          div.appendChild(status);
        });
      // var s1 = document.getElementById("select");
      // var s2 = document.getElementById("select2");
      // var s3 = document.getElementById("select3");

      // var core = {
      //   name: s1,
      //   title: s2,
      //   hour: s3
      // };

      // console.log(core);
    </script>
  </body>
</html>
